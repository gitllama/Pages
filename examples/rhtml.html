<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Table_TransDst</title>


</head>
<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://unpkg.com/react@15.6.1/dist/react.min.js"></script>
<script src="https://unpkg.com/react-dom@15.6.1/dist/react-dom.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.38/browser.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-bootstrap/0.31.2/react-bootstrap.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/latest/css/bootstrap.min.css">

<script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/3.4.2/js-yaml.min.js"></script>
<style type="text/css">
@page {
  size: A4;
  margin: 0;
}
</style>
<body>
<svg xmlns="http://www.w3.org/2000/svg" width="217.75" height="37.45" viewBox="0 0 435.536 74.905"  overflow="visible"><path d="M0 37.5C0 44 1.7 50.3 4.8 55.7V19.2C1.8 24.6 0 30.8 0 37.5M70 19.2V4.8H55.8c6 3.3 11 8.3 14.4 14.4M37.5 0c-6.7 0-13 1.7-18.3 4.8h36.5C50.3 1.8 44 0 37.5 0M37.5 75c6.6 0 12.8-1.8 18.2-5H19.2c5.4 3.2 11.6 5 18.3 5M70 19.2v36.5c3.2-5.4 5-11.6 5-18.2 0-6.7-1.8-13-5-18.3M55.7 70H70V55.8c-3.2 6-8.3 11-14.3 14.4M19.2 4.8H4.8v14.4c3.3-6 8.3-11 14.4-14.4M4.8 55.7V70h14.4C13.2 67 8.2 62 4.8 56" fill="#00A0E9"/><path d="M259 30.2v-1.7h10v1.7h-4v16.2h-2V30.2M272.5 28.5h10.3v1.7h-8.5V36h8.4v1.6h-8.4v7h8.4v1.8h-10.2M303.6 31.8l-1.4 1c-.8-1-1.7-1.7-2.8-2.2-1-.5-2.3-.8-3.6-.8-1.4 0-2.8.3-4 1-1.2.7-2 1.6-2.8 2.8-.7 1.2-1 2.5-1 4 0 2 .7 4 2.2 5.4 1.5 1.4 3.4 2.2 5.7 2.2 2.4 0 4.5-1 6.2-3l1.4 1c-1 1.2-2 2-3.3 2.7s-2.8 1-4.5 1c-3 0-5.6-1.2-7.4-3.3-1.6-1.7-2.3-4-2.3-6.4 0-2.6 1-4.8 3-6.6 1.7-1.8 4-2.7 6.8-2.7 1.7 0 3.2.4 4.5 1 1.4.7 2.5 1.6 3.3 2.8M308.2 28.5h1.8V36h9v-7.5h2v18h-2v-8.7h-9v8.6h-1.8M326.3 46.4v-18h.4l12 13.8V28.5h1.7v18h-.4l-11.8-13.7v13.6M354.3 28c2.7 0 5 1 6.8 2.7 2 2 3 4 3 6.7s-1 5-3 6.7c-1.7 2-4 3-6.5 3-2.7 0-5-1-6.8-3-1.8-1.7-2.7-4-2.7-6.5 0-1.7.4-3.3 1.2-4.8 1-1.4 2-2.6 3.4-3.4 1.5-1 3-1.3 4.7-1.3m0 1.8c-1.2 0-2.5.3-3.7 1-1.2.7-2 1.6-2.8 2.8-.6 1.2-1 2.5-1 4 0 2 .8 4 2.3 5.3 1.5 1.4 3.3 2 5.4 2 1.4 0 2.7-.2 4-1 1-.6 2-1.5 2.6-2.7.7-1 1-2.4 1-4 0-1.3-.3-2.6-1-3.7-.6-1.2-1.6-2-2.8-2.8-1.2-.7-2.5-1-3.8-1M368.5 28.5h1.8v16.2h7v1.7h-8.8M388.6 28c2.7 0 5 1 6.8 2.7 1.8 2 2.8 4 2.8 6.7s-1 5-2.8 6.7c-1.8 2-4 3-6.7 3-2.6 0-5-1-6.7-3-1.8-1.7-2.7-4-2.7-6.5 0-1.7.4-3.3 1.2-4.8.8-1.4 2-2.6 3.4-3.4 1.4-1 3-1.3 4.6-1.3m0 1.8c-1.3 0-2.5.3-3.7 1-1.3.7-2.2 1.6-3 2.8-.6 1.2-1 2.5-1 4 0 2 .8 4 2.3 5.3 1.5 1.4 3.3 2 5.4 2 1.4 0 2.7-.2 3.8-1 1.2-.6 2-1.5 2.8-2.7.7-1 1-2.4 1-4 0-1.3-.3-2.6-1-3.7-.7-1.2-1.6-2-2.8-2.8-1.2-.7-2.5-1-3.8-1M419.4 31.5l-1.4 1.3c-1-1-2-1.7-3.3-2.2-1.2-.5-2.3-.8-3.5-.8-1.4 0-2.7.4-4 1-1.3.7-2.2 1.7-3 3-.6 1-1 2.3-1 3.6 0 1.4.4 2.6 1 4 .8 1 1.8 2 3 2.7 1.4.8 2.8 1.2 4.3 1.2 1.8 0 3.4-.6 4.7-1.6 1.2-1 2-2.4 2.2-4h-5.7v-1.8h7.8c0 2.8-1 5-2.5 6.6-1.7 1.7-3.8 2.5-6.6 2.5-3.3 0-6-1.3-7.8-3.5-1.5-1.8-2.3-3.8-2.3-6 0-1.8.5-3.3 1.3-4.8 1-1.5 2-2.6 3.5-3.4 1.6-1 3.3-1.3 5.2-1.3 1.5 0 3 .3 4.3.8 1.3.6 2.6 1.5 4 2.7M422.3 28.5h2L429 36l4.5-7.5h2l-5.6 9.3v8.6h-2v-8.6M112.6 38.3c-.4-.7-1-1.3-2-1.8.5-.4.8-.8 1-1.3.4-.6.5-1.2.5-2 0-1-.2-2-1-2.8-.5-.8-1.4-1.3-2.5-1.6-.8-.2-2-.3-3.5-.3h-3v18h5c1.5 0 2.7-.3 3.5-.7 1-.4 1.6-1 2-2 .6-.7 1-1.7 1-2.7 0-1-.3-2-1-2.7m-7-6.4h1c.7 0 1.2 0 1.6.4.5.3.6.8.6 1.3 0 .6 0 1-.5 1.4-.3.4-1 .6-1.7.6h-.8V32zm3.7 10.5c-.5.3-1.5.5-2.8.5h-1v-4.5h.8c1.3 0 2.3.3 2.8.7.6.4 1 1 1 1.8 0 .6-.4 1-1 1.5M124.5 38.6c1-.4 1.8-1 2.3-1.7.6-1 1-2 1-3.2 0-1-.4-2-1-3-.4-.8-1-1.4-2-1.8-1-.4-2.3-.5-4.2-.5h-3.8v18h4v-7l3.6 7h4.3l-4.2-8zm-1-3.5c-.3.4-1 .6-2 .6h-1V32h.8c1 0 1.5 0 1.8.2.4 0 .7.3 1 .6l.2 1c0 .6-.2 1-.6 1.3M146.7 30.7c-1.8-2-4-2.8-6.6-2.8-1.7 0-3.3.3-4.7 1.2-1.5.8-2.7 2-3.5 3.4-1 1.5-1.3 3-1.3 5 0 2.5 1 4.7 2.7 6.6 1.8 2 4 2.8 7 2.8 2.5 0 4.7-1 6.5-2.7 2-2 2.8-4.2 2.8-6.8 0-2.7-1-5-2.8-6.8m-1 6.8c0 1.6-.7 3-1.7 4-1 1.2-2.4 1.7-4 1.7-1.3 0-2.5-.4-3.5-1.2-1.4-1-2-2.6-2-4.5 0-1.7.5-3 1.6-4 1-1.2 2.4-1.8 4-1.8s3 .6 4 1.7c1 1 1.6 2.5 1.6 4M171 37.5c0-2.7-1-5-3-6.8-1.8-2-4-2.8-6.6-2.8-1.7 0-3.3.3-4.8 1.2-1.4.8-2.6 2-3.4 3.4-1 1.5-1.3 3-1.3 5 0 2.5.8 4.7 2.6 6.6 1.8 2 4 2.8 6.8 2.8 2.6 0 5-1 6.7-2.7 2-2 3-4 3-6.8h-.2m-4 0c0 1.6-.4 3-1.5 4-1 1.2-2.3 1.7-4 1.7-1.2 0-2.4-.4-3.5-1.2-1.3-1-2-2.6-2-4.5 0-1.7.6-3 1.6-4 1-1.2 2.4-1.8 4-1.8 1.5 0 2.8.6 4 1.7 1 1 1.5 2.5 1.5 4M180.3 36.5l6.4-8H182l-4.3 5.4v-5.5h-4v18h4v-7l5 7h4.5M207.6 28.5H204L200 40l-3.8-11.5h-3.7v.2l-3 17.7h3.8l1.7-10 3.3 10h3.4l3.4-10 1.8 10h3.8M222.8 28.5H219v.2l-7 17.7h4l1.6-3.5h6.7l1.3 3.4h4l-6.8-18zm-4.2 10.8l2.3-6 2.2 6h-4.6zM243 28.5v10.7l-7-10.7h-3.5v18h4V35.6l6.8 10.7h3.7v-18"/></svg>
  <div id="app" />
  <script type="text/babel">

  const yaml = "a : v\r\nb : c\r\n";
  const js = "a : v\r\nb : c\r\n";

  let { PageHeader, FieldGroup,
        Grid, Row, Col, Jumbotron, Table,
        Panel, Label,Alert
      } = window.ReactBootstrap;

  class Title extends React.Component {
    constructor(props) {
      super(props)
    }
    render() {
      return (
        <div>
        <img  src={"'data:image/svg+xml;base64,"  + "'"} />
        <PageHeader>Example page header <small>Subtext for header</small></PageHeader>
        </div>
      );
    }
  }

  //gridはxs12分割 md8分割
  //xs extra small(tel,おりかえさない), sm small(tablet), md middle(PC)
  class Conditons extends React.Component {
    constructor(props) {
      super(props)
    }
    render() {
      return (
        <div style={{display:"flex"}}>
          <div style={{width:"80px"}}><strong>{this.props.title}</strong></div>
          <div style={{width:"30px"}}><strong>:</strong></div>
          <div>{this.props.value}</div>
        </div>
      );
    }
  }



      //props
      //data : table json data
      //index : true or false
      //isResponsive : true or false
      //isColSpan : true or false
      class Tables extends React.Component {
        constructor(props) {
          super(props)
          this.title = this.props.title;;
          this.data = this.props.src;
        }
        render() {
          //thead
          const th_dom = Object.keys(this.data[0]).map((n)=>{return <th>{n}</th>});
          const thead_dom = this.props.index ? <thead><tr> <th>#</th> {th_dom} </tr></thead>
                                             : <thead><tr> {th_dom} </tr></thead>;
          //tbody
          const td_dom =(value)=>{
            if(!this.props.isColSpan) return Object.values(value).map((n)=>{return <td>{n}</td>});
            var hoge = Object.values(value).map((n)=> n);
            var dst = [];
            for(let i = 0; i < hoge.length; i++){
              if(i>0 && hoge[i-1] == hoge[i]) continue;
              for(var j = 1;j< hoge.length - i; j++){
                if(hoge[i] != hoge[i+j]) break;
              }
              if(j > 1) dst.push(<td colSpan={j}>{hoge[i]}</td>);
              else dst.push(<td>{hoge[i]}</td>);
            }
            return dst;
          }
          const td_doms =(value, index)=>{
            return this.props.index ? <tr><td>{index+1}</td> {td_dom(value)}</tr>
                                    : <tr>{td_dom(value)}</tr>;
          };
          const tbody_dom = this.data.map((value, index)=>{
            return <tbody> {td_doms(value, index)} </tbody>;
          });
          //isResponsive
          const table_dom =(thead,tbody)=>{
            return this.props.isResponsive
              ? <Table striped bordered condensed hover>{thead}{tbody}</Table>
              : <Table responsive>{thead}{tbody}</Table>;
          };
          //return
          return (
            <div>
              <label>{this.title}</label>
              {table_dom(thead_dom,tbody_dom)}
            </div>
          );
        }
      }

      class App extends React.Component {
        constructor(props) {
          super(props);
          var hoge = null;
          //var hoge = jsyaml.load(yaml);
          //var hoge = sessionStorage.getItem('conditions');
          //console.log(hoge);

          this.state = {
            values : "a"
          };

		      if(hoge){
            this.src = JSON.parse(hoge);
          }else{
            this.src = [
              {type : "condition", title : "Title", value : "Value"},
              {type : "condition", title : "Title", value : "Value"},
              {type : "note", value : "Value"},
              {type : "table", title : "Table 1 Conditions",
                data : [
                  {A : 1, B : 2, C : 3},
                  {A : 2, B : 2, C : 6}
                ]
              },
              {type : "warning", value : "Value"},
            ];
          }
          this.dst = this.src.map((i)=>{
            //console.log(i);
            switch(i.type){
              case "condition":
                return <Conditons title={i.title} value={i.value}/>;
              case "note":
                return <div style={{margin:'20px'}} ><p>{i.value}</p></div>;
              case "table":
                return <Tables title={i.title} src={i.data}
                          index={true}
                          isResponsive={false}
                          isColSpan={true} />;
              case "warning":
                return (<Alert bsStyle="danger">
                         <h4>Oh snap! You got an error!</h4>
                         <strong>Holy guacamole!</strong> Best check yo self, youre not looking too good.
                        </Alert>);
              default:
                return "";
            }
          });
        }
        render() {
          return (
            <div style={{margin:'50px'}}>
              <Title />
              {this.dst}
            </div>
          );
        }
      }

/*
<Tables src={this.src}
        index={true}
        isResponsive={false}/>
<Tables src={this.src}
        index={true}
        isResponsive={true}/>
<Tables src={this.src}
        isColSpan={true}
        isResponsive={true}/>
<Panel header={"warning"} bsStyle="warning">
  Panel content
</Panel>
<Panel header={"danger"} bsStyle="danger">
  Panel content
</Panel>
<Label bsStyle="danger">Danger</Label>
<Alert bsStyle="warning">
  <h4>Oh snap! You got an error!</h4>
    <strong>Holy guacamole!</strong> Best check yo self, youre not looking too good.
</Alert>
*/

    ReactDOM.render(<App />, document.querySelector('#app'));

  </script>
</body>
</html>

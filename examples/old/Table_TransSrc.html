<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Table_TransSrc</title>
</head>
<script src="https://unpkg.com/react@15.6.1/dist/react.min.js"></script>
<script src="https://unpkg.com/react-dom@15.6.1/dist/react-dom.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.38/browser.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/react-bootstrap/0.31.2/react-bootstrap.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/3.4.2/js-yaml.min.js"></script>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/latest/css/bootstrap.min.css">

<body>
  <div id="app"></div>
  <script type="text/babel">

  const value = {
    title : "Title",
    subtitle : "subTitle",
    detail : [
    {type : "condition", title : "Title", value : "Value"},
    {type : "condition", title : "Title", value : "Value"},
    {type : "note", value : "Value"},
    {type : "table", title : "Table 1 Conditions",
      data : [
        {A : 1, B : 2, C : 3},
        {A : 2, B : 2, C : 6}
      ]
    },
    {type : "warning", value : "Value"}
  ]};

  let {
        Jumbotron, Button,FormGroup,FormControl
      } = window.ReactBootstrap;

  class App extends React.Component {
    constructor(props) {
      super(props)
    }
    onClick(){
      let yaml = jsyaml.load(ReactDOM.findDOMNode(this.refs.inputText).value);
      console.log(yaml);//jsyaml.load());
      if(('sessionStorage' in window) && (window.sessionStorage !== null)){
        sessionStorage.setItem('conditions', JSON.stringify(yaml));
        window.location.href = "Table_TransDst.html";
      }else{
            //つかえない時
      }
    }
    render() {
      return (
        <Jumbotron style={{padding : "10px"}}>
          <h2>You Try "Yaml to Tables"</h2>
          <FormGroup controlId="formControlsTextarea">
            <FormControl componentClass="textarea" placeholder="textarea"
                         ref="inputText" defaultValue={jsyaml.dump(value)} />
            </FormGroup>
          <FormGroup controlId="formControlsbutton">
            <Button bsStyle="primary" bsSize="large"
                    onClick={this.onClick.bind(this)}>Submit</Button>
          </FormGroup>
        </Jumbotron>
      );
    }
  }

  ReactDOM.render(<App />, document.querySelector('#app'));

  </script>
</body>
</html>
